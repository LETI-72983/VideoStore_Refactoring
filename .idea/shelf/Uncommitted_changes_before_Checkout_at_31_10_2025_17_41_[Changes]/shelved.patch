Index: VideoStore_Refactoring/src/ficha3/Movie.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package ficha3;\r\n\r\npublic class Movie {\r\n\r\n    public int getFrequentRentalPoints(Rental rental)\r\n    {\r\n        return ((rental.getMovie().getPriceCode() == Code.NEW_RELEASE) && rental.getDaysRented() > 1) ? 2 : 1;\r\n    }\r\n\r\n    double getRentalAmount(Rental rental) {\r\n        double result = 0;\r\n\r\n        switch (_priceCode)\r\n        {\r\n            case REGULAR:\r\n                result += 2;\r\n                if (rental.getDaysRented() > 2)\r\n                    result += (rental.getDaysRented() - 2) * 1.5;\r\n                break;\r\n            case NEW_RELEASE:\r\n                result += rental.getDaysRented() * 3;\r\n                break;\r\n            case CHILDRENS:\r\n                result += 1.5;\r\n                if (rental.getDaysRented() > 3)\r\n                    result += (rental.getDaysRented() - 3) * 1.5;\r\n                break;\r\n        }\r\n        return result;\r\n    }\r\n\r\n    public enum Code {REGULAR, CHILDRENS, NEW_RELEASE};\r\n\t\r\n\tprivate String _title;\r\n\tprivate Code _priceCode;\r\n\t\r\n\tpublic Movie(String title, Code priceCode) {\r\n\t\t_title = title;\r\n\t\t_priceCode = priceCode;\r\n\t}\r\n\r\n\tpublic String getTitle() {\r\n\t\treturn _title;\r\n\t}\r\n\r\n\tpublic Code getPriceCode() {\r\n\t\treturn _priceCode;\r\n\t}\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/VideoStore_Refactoring/src/ficha3/Movie.java b/VideoStore_Refactoring/src/ficha3/Movie.java
--- a/VideoStore_Refactoring/src/ficha3/Movie.java	(revision 96aaf822693f0ce5c02debbe2246842a6aad844c)
+++ b/VideoStore_Refactoring/src/ficha3/Movie.java	(date 1761932129296)
@@ -2,48 +2,32 @@
 
 public class Movie {
 
-    public int getFrequentRentalPoints(Rental rental)
-    {
-        return ((rental.getMovie().getPriceCode() == Code.NEW_RELEASE) && rental.getDaysRented() > 1) ? 2 : 1;
-    }
-
-    double getRentalAmount(Rental rental) {
-        double result = 0;
-
-        switch (_priceCode)
-        {
-            case REGULAR:
-                result += 2;
-                if (rental.getDaysRented() > 2)
-                    result += (rental.getDaysRented() - 2) * 1.5;
-                break;
-            case NEW_RELEASE:
-                result += rental.getDaysRented() * 3;
-                break;
-            case CHILDRENS:
-                result += 1.5;
-                if (rental.getDaysRented() > 3)
-                    result += (rental.getDaysRented() - 3) * 1.5;
-                break;
-        }
-        return result;
-    }
-
-    public enum Code {REGULAR, CHILDRENS, NEW_RELEASE};
-	
-	private String _title;
-	private Code _priceCode;
-	
-	public Movie(String title, Code priceCode) {
-		_title = title;
-		_priceCode = priceCode;
-	}
+    private String _title;
+    private Price _price;
+
+    public Movie(String title, Price price) {
+        _title = title;
+        _price = price;
+    }
 
-	public String getTitle() {
-		return _title;
-	}
+    public String getTitle() {
+        return _title;
+    }
 
-	public Code getPriceCode() {
-		return _priceCode;
-	}
+    public Price getPrice() {
+        return _price;
+    }
+
+    // Calcula o valor total do aluguel através do polimorfismo
+    public double getRentalAmount(Rental rental) {
+        return _price.getRentalAmount(this, rental.getDaysRented());
+    }
+
+    // Calcula os pontos de fidelização (mantém a lógica anterior)
+    public int getFrequentRentalPoints(Rental rental) {
+        // filmes novos alugados por mais de 1 dia valem 2 pontos
+        if (_price instanceof NewReleasePrice && rental.getDaysRented() > 1)
+            return 2;
+        return 1;
+    }
 }
Index: VideoStore_Refactoring/src/ficha3/RegularPrice.java
===================================================================
diff --git a/VideoStore_Refactoring/src/ficha3/RegularPrice.java b/VideoStore_Refactoring/src/ficha3/RegularPrice.java
new file mode 100644
--- /dev/null	(date 1761931683832)
+++ b/VideoStore_Refactoring/src/ficha3/RegularPrice.java	(date 1761931683832)
@@ -0,0 +1,21 @@
+package ficha3;
+
+import v9.Price;
+
+public class RegularPrice extends Price
+{
+
+    public RegularPrice()
+    {
+    }
+
+    public double getRentalAmount(int duration)
+    {
+        return 2 + (duration > 2 ? (duration - 2) * 1.5 : 0);
+    }
+
+    public int getFrequentRentalPoints(int duration)
+    {
+        return 1;
+    }
+}
\ No newline at end of file
Index: VideoStore_Refactoring/src/ficha3/NewReleasePrice.java
===================================================================
diff --git a/VideoStore_Refactoring/src/ficha3/NewReleasePrice.java b/VideoStore_Refactoring/src/ficha3/NewReleasePrice.java
new file mode 100644
--- /dev/null	(date 1761931999470)
+++ b/VideoStore_Refactoring/src/ficha3/NewReleasePrice.java	(date 1761931999470)
@@ -0,0 +1,22 @@
+package ficha3;
+
+import v9.Price;
+
+public class NewReleasePrice extends Price
+{
+
+    public NewReleasePrice()
+    {
+    }
+
+    public double getRentalAmount(int duration)
+    {
+        return duration * 3;
+    }
+
+    public int getFrequentRentalPoints(int duration)
+    {
+        return duration > 1 ? 2 : 1;
+    }
+
+}
Index: VideoStore_Refactoring/src/ficha3/ChildrensPrice.java
===================================================================
diff --git a/VideoStore_Refactoring/src/ficha3/ChildrensPrice.java b/VideoStore_Refactoring/src/ficha3/ChildrensPrice.java
new file mode 100644
--- /dev/null	(date 1761931517782)
+++ b/VideoStore_Refactoring/src/ficha3/ChildrensPrice.java	(date 1761931517782)
@@ -0,0 +1,22 @@
+package ficha3;
+
+
+public class ChildrensPrice extends Price
+{
+
+    public ChildrensPrice()
+    {
+    }
+
+
+    public double getRentalAmount(int duration)
+    {
+        return 1.5 + (duration > 3 ? (duration - 3) * 1.5 : 0);
+    }
+
+    public int getFrequentRentalPoints(int duration)
+    {
+        return 1;
+    }
+
+}
Index: VideoStore_Refactoring/src/v9/Main.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package v9;\r\n\r\nimport java.io.FileWriter;\r\nimport java.io.IOException;\r\nimport java.io.PrintWriter;\r\n\r\n/***********************************************************\r\n * Filename: Main.java\r\n * @author fba 6 de Mai de 2013\r\n ***********************************************************/\r\npublic abstract class Main\r\n{\r\n\r\n\t/***********************************************************\r\n\t * @param args\r\n\t * @throws IOException \r\n\t ***********************************************************/\r\n\tpublic static void main(String[] args) throws IOException\r\n\t{\r\n\t\tPrice regularPrice = new RegularPrice();\r\n\t\tPrice childrensPrice = new ChildrensPrice();\r\n\t\tPrice newReleasePrice = new NewReleasePrice();\r\n\t\t\r\n\t\tCustomer who = new Customer(\"Barack Obama\");\r\n\t\tMovie m1 = new Movie(\"Life of Amalia\", regularPrice);\r\n\t\tMovie m2 = new Movie(\"Peter Pan\", childrensPrice);\r\n\t\tMovie m3 = new Movie(\"Donna del Lago\", newReleasePrice);\r\n\r\n\t\twho.addRental(new Rental(m1, 1));\r\n\t\twho.addRental(new Rental(m2, 2));\r\n\t\twho.addRental(new Rental(m3, 3));\r\n\t\tSystem.out.println( who.statement());\r\n\t\t\r\n\t\tPrintWriter html = new PrintWriter(new FileWriter(\"webPages/statement.html\")); \r\n\t\thtml.println(who.htmlStatement()); \r\n\t\thtml.close();\r\n\t}\r\n\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/VideoStore_Refactoring/src/v9/Main.java b/VideoStore_Refactoring/src/v9/Main.java
--- a/VideoStore_Refactoring/src/v9/Main.java	(revision 96aaf822693f0ce5c02debbe2246842a6aad844c)
+++ b/VideoStore_Refactoring/src/v9/Main.java	(date 1761931789162)
@@ -4,6 +4,7 @@
 import java.io.IOException;
 import java.io.PrintWriter;
 
+
 /***********************************************************
  * Filename: Main.java
  * @author fba 6 de Mai de 2013
Index: .idea/workspace.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"AutoImportSettings\">\r\n    <option name=\"autoReloadType\" value=\"SELECTIVE\" />\r\n  </component>\r\n  <component name=\"ChangeListManager\">\r\n    <list default=\"true\" id=\"64ead745-f141-468e-a88d-90a1ad81ae76\" name=\"Changes\" comment=\"alterações v2, inline refactoring do thisAmount()\">\r\n      <change afterPath=\"$PROJECT_DIR$/VideoStore_Refactoring/src/ficha3/Price.java\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/.idea/workspace.xml\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/.idea/workspace.xml\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/VideoStore_Refactoring/src/ficha3/Movie.java\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/VideoStore_Refactoring/src/ficha3/Movie.java\" afterDir=\"false\" />\r\n    </list>\r\n    <option name=\"SHOW_DIALOG\" value=\"false\" />\r\n    <option name=\"HIGHLIGHT_CONFLICTS\" value=\"true\" />\r\n    <option name=\"HIGHLIGHT_NON_ACTIVE_CHANGELIST\" value=\"false\" />\r\n    <option name=\"LAST_RESOLUTION\" value=\"IGNORE\" />\r\n  </component>\r\n  <component name=\"FileTemplateManagerImpl\">\r\n    <option name=\"RECENT_TEMPLATES\">\r\n      <list>\r\n        <option value=\"Class\" />\r\n      </list>\r\n    </option>\r\n  </component>\r\n  <component name=\"Git.Settings\">\r\n    <option name=\"RECENT_BRANCH_BY_REPOSITORY\">\r\n      <map>\r\n        <entry key=\"$PROJECT_DIR$\" value=\"main\" />\r\n      </map>\r\n    </option>\r\n    <option name=\"RECENT_GIT_ROOT_PATH\" value=\"$PROJECT_DIR$\" />\r\n  </component>\r\n  <component name=\"GitHubPullRequestSearchHistory\">{\r\n  &quot;lastFilter&quot;: {\r\n    &quot;state&quot;: &quot;OPEN&quot;,\r\n    &quot;assignee&quot;: &quot;LETI-72983&quot;\r\n  }\r\n}</component>\r\n  <component name=\"GithubPullRequestsUISettings\">{\r\n  &quot;selectedUrlAndAccountId&quot;: {\r\n    &quot;url&quot;: &quot;https://github.com/LETI-72983/VideoStore_Refactoring.git&quot;,\r\n    &quot;accountId&quot;: &quot;cfcf8b96-0416-45c3-81e8-8d6ae745af36&quot;\r\n  }\r\n}</component>\r\n  <component name=\"ProjectColorInfo\">{\r\n  &quot;associatedIndex&quot;: 0\r\n}</component>\r\n  <component name=\"ProjectId\" id=\"34T69uFv81M7XKKGx0EzSNwdOPO\" />\r\n  <component name=\"ProjectViewState\">\r\n    <option name=\"hideEmptyMiddlePackages\" value=\"true\" />\r\n    <option name=\"showLibraryContents\" value=\"true\" />\r\n  </component>\r\n  <component name=\"PropertiesComponent\"><![CDATA[{\r\n  \"keyToString\": {\r\n    \"ModuleVcsDetector.initialDetectionPerformed\": \"true\",\r\n    \"RunOnceActivity.ShowReadmeOnStart\": \"true\",\r\n    \"RunOnceActivity.TerminalTabsStorage.copyFrom.TerminalArrangementManager.252\": \"true\",\r\n    \"RunOnceActivity.git.unshallow\": \"true\",\r\n    \"extract.method.default.visibility\": \"private\",\r\n    \"git-widget-placeholder\": \"ficha3-v7\",\r\n    \"kotlin-language-version-configured\": \"true\",\r\n    \"node.js.detected.package.eslint\": \"true\",\r\n    \"node.js.detected.package.tslint\": \"true\",\r\n    \"node.js.selected.package.eslint\": \"(autodetect)\",\r\n    \"node.js.selected.package.tslint\": \"(autodetect)\",\r\n    \"nodejs_package_manager_path\": \"npm\",\r\n    \"settings.editor.selected.configurable\": \"vcs.Git\",\r\n    \"vue.rearranger.settings.migration\": \"true\"\r\n  }\r\n}]]></component>\r\n  <component name=\"RecentsManager\">\r\n    <key name=\"MoveMembersDialog.RECENTS_KEY\">\r\n      <recent name=\"ficha3.Rental\" />\r\n    </key>\r\n  </component>\r\n  <component name=\"SharedIndexes\">\r\n    <attachedChunks>\r\n      <set>\r\n        <option value=\"bundled-jdk-9823dce3aa75-bf35d07a577b-intellij.indexing.shared.core-IU-252.27397.103\" />\r\n        <option value=\"bundled-js-predefined-d6986cc7102b-3aa1da707db6-JavaScript-IU-252.27397.103\" />\r\n      </set>\r\n    </attachedChunks>\r\n  </component>\r\n  <component name=\"TaskManager\">\r\n    <task active=\"true\" id=\"Default\" summary=\"Default task\">\r\n      <changelist id=\"64ead745-f141-468e-a88d-90a1ad81ae76\" name=\"Changes\" comment=\"\" />\r\n      <created>1761225069302</created>\r\n      <option name=\"number\" value=\"Default\" />\r\n      <option name=\"presentableId\" value=\"Default\" />\r\n      <updated>1761225069302</updated>\r\n      <workItem from=\"1761225070749\" duration=\"1236000\" />\r\n      <workItem from=\"1761830383543\" duration=\"3963000\" />\r\n    </task>\r\n    <task id=\"LOCAL-00001\" summary=\"criar projeto\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1761226042252</created>\r\n      <option name=\"number\" value=\"00001\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00001\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1761226042252</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00002\" summary=\"alterações v2, criar metodo getFrequentRentalPoints() no customer.java\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1761231022259</created>\r\n      <option name=\"number\" value=\"00002\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00002\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1761231022259</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00003\" summary=\"alterações v2, tratados erros função statement\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1761231583615</created>\r\n      <option name=\"number\" value=\"00003\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00003\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1761231583615</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00004\" summary=\"alterações v2, inline refactoring do thisAmount()\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1761831963648</created>\r\n      <option name=\"number\" value=\"00004\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00004\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1761831963648</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00005\" summary=\"alterações v2, inline refactoring do thisAmount()\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1761833784742</created>\r\n      <option name=\"number\" value=\"00005\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00005\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1761833784742</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00006\" summary=\"alterações v2, inline refactoring do thisAmount()\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1761834030826</created>\r\n      <option name=\"number\" value=\"00006\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00006\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1761834030826</updated>\r\n    </task>\r\n    <option name=\"localTasksCounter\" value=\"7\" />\r\n    <servers />\r\n  </component>\r\n  <component name=\"TypeScriptGeneratedFilesManager\">\r\n    <option name=\"version\" value=\"3\" />\r\n  </component>\r\n  <component name=\"VcsManagerConfiguration\">\r\n    <MESSAGE value=\"criar projeto\" />\r\n    <MESSAGE value=\"alterações v2, criar metodo getFrequentRentalPoints() no customer.java\" />\r\n    <MESSAGE value=\"alterações v2, tratados erros função statement\" />\r\n    <MESSAGE value=\"alterações v2, inline refactoring do thisAmount()\" />\r\n    <option name=\"LAST_COMMIT_MESSAGE\" value=\"alterações v2, inline refactoring do thisAmount()\" />\r\n  </component>\r\n</project>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/.idea/workspace.xml b/.idea/workspace.xml
--- a/.idea/workspace.xml	(revision 96aaf822693f0ce5c02debbe2246842a6aad844c)
+++ b/.idea/workspace.xml	(date 1761932452321)
@@ -5,9 +5,14 @@
   </component>
   <component name="ChangeListManager">
     <list default="true" id="64ead745-f141-468e-a88d-90a1ad81ae76" name="Changes" comment="alterações v2, inline refactoring do thisAmount()">
-      <change afterPath="$PROJECT_DIR$/VideoStore_Refactoring/src/ficha3/Price.java" afterDir="false" />
+      <change afterPath="$PROJECT_DIR$/VideoStore_Refactoring/src/ficha3/ChildrensPrice.java" afterDir="false" />
+      <change afterPath="$PROJECT_DIR$/VideoStore_Refactoring/src/ficha3/NewReleasePrice.java" afterDir="false" />
+      <change afterPath="$PROJECT_DIR$/VideoStore_Refactoring/src/ficha3/RegularPrice.java" afterDir="false" />
       <change beforePath="$PROJECT_DIR$/.idea/workspace.xml" beforeDir="false" afterPath="$PROJECT_DIR$/.idea/workspace.xml" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/VideoStore_Refactoring/src/ficha3/Main.java" beforeDir="false" afterPath="$PROJECT_DIR$/VideoStore_Refactoring/src/ficha3/Main.java" afterDir="false" />
       <change beforePath="$PROJECT_DIR$/VideoStore_Refactoring/src/ficha3/Movie.java" beforeDir="false" afterPath="$PROJECT_DIR$/VideoStore_Refactoring/src/ficha3/Movie.java" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/VideoStore_Refactoring/src/ficha3/Price.java" beforeDir="false" afterPath="$PROJECT_DIR$/VideoStore_Refactoring/src/ficha3/Price.java" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/VideoStore_Refactoring/src/v9/Main.java" beforeDir="false" afterPath="$PROJECT_DIR$/VideoStore_Refactoring/src/v9/Main.java" afterDir="false" />
     </list>
     <option name="SHOW_DIALOG" value="false" />
     <option name="HIGHLIGHT_CONFLICTS" value="true" />
@@ -56,7 +61,7 @@
     "RunOnceActivity.TerminalTabsStorage.copyFrom.TerminalArrangementManager.252": "true",
     "RunOnceActivity.git.unshallow": "true",
     "extract.method.default.visibility": "private",
-    "git-widget-placeholder": "ficha3-v7",
+    "git-widget-placeholder": "main",
     "kotlin-language-version-configured": "true",
     "node.js.detected.package.eslint": "true",
     "node.js.detected.package.tslint": "true",
Index: VideoStore_Refactoring/src/ficha3/Price.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package ficha3;\r\n\r\npublic class Price {\r\n    public enum Code {REGULAR, CHILDRENS, NEW_RELEASE}\r\n\r\n    public Code\t_priceCode;\r\n\r\n    public Price(){}\r\n\r\n    public double getRentalAmount(Movie movie, int duration) {\r\n        double result = 0;\r\n\r\n        switch (_priceCode) {\r\n            case REGULAR:\r\n                result +=2;\r\n                if(duration > 2)\r\n                    result+= (duration - 2) * 1.5;\r\n                break;\r\n            case NEW_RELEASE:\r\n                result += duration * 3;\r\n                break;\r\n            case CHILDRENS:\r\n                result += 1.5;\r\n                if (duration > 3)\r\n                    result += (duration - 3) * 1.5;\r\n                break;\r\n        }\r\n        return result;\r\n    }\r\n}\r\n
===================================================================
diff --git a/VideoStore_Refactoring/src/ficha3/Price.java b/VideoStore_Refactoring/src/ficha3/Price.java
--- a/VideoStore_Refactoring/src/ficha3/Price.java	(revision 96aaf822693f0ce5c02debbe2246842a6aad844c)
+++ b/VideoStore_Refactoring/src/ficha3/Price.java	(date 1761931596206)
@@ -1,30 +1,10 @@
 package ficha3;
 
-public class Price {
-    public enum Code {REGULAR, CHILDRENS, NEW_RELEASE}
-
-    public Code	_priceCode;
+public abstract class Price {
 
     public Price(){}
 
-    public double getRentalAmount(Movie movie, int duration) {
-        double result = 0;
+    public abstract double getRentalAmount(int duration);
+    public abstract int getFrequentRentalPoints(int duration);
 
-        switch (_priceCode) {
-            case REGULAR:
-                result +=2;
-                if(duration > 2)
-                    result+= (duration - 2) * 1.5;
-                break;
-            case NEW_RELEASE:
-                result += duration * 3;
-                break;
-            case CHILDRENS:
-                result += 1.5;
-                if (duration > 3)
-                    result += (duration - 3) * 1.5;
-                break;
-        }
-        return result;
-    }
 }
